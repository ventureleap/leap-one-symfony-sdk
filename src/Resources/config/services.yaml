# config/services.yaml
services:

  _defaults:
    autowire: true      # Automatically injects dependencies in your services.
    autoconfigure: true # Automatically registers your services as commands, event subscribers, etc.

  # makes classes in src/ available to be used as services
  # this creates a service per class whose id is the fully-qualified class name
  VentureLeap\LeapOneSymfonySdk\:
    resource: '../../../src/*'

  # MESSENGER
  VentureLeap\LeapOneSymfonySdk\Services\ApiProvider\MessengerApiProvider:
    arguments:
      $endpoint: '%env(string:LEAP_ONE_ENDPOINT_URL)%'

  VentureLeap\MessengerService\Api\MessageApi:
    factory: [ '@VentureLeap\LeapOneSymfonySdk\Services\ApiProvider\MessengerApiProvider', 'getMessageApi' ]

  VentureLeap\MessengerService\Api\TemplateApi:
    factory: [ '@VentureLeap\LeapOneSymfonySdk\Services\ApiProvider\MessengerApiProvider', 'getTemplateApi' ]

  VentureLeap\MessengerService\Api\ConfigurationEntryApi:
    factory: [ '@VentureLeap\LeapOneSymfonySdk\Services\ApiProvider\MessengerApiProvider', 'getConfigurationEntryApi' ]

  # ORDER
  VentureLeap\LeapOneSymfonySdk\Services\ApiProvider\OrderApiProvider:
    arguments:
      $endpoint: '%env(string:LEAP_ONE_ENDPOINT_URL)%'

  VentureLeap\OrderService\Api\OrderApi:
    factory: [ '@VentureLeap\LeapOneSymfonySdk\Services\ApiProvider\OrderApiProvider', 'getOrderApi' ]

  VentureLeap\OrderService\Api\OrderProductApi:
    factory: [ '@VentureLeap\LeapOneSymfonySdk\Services\ApiProvider\OrderApiProvider', 'getOrderProductApi' ]

  VentureLeap\OrderService\Api\VoucherApi:
    factory: [ '@VentureLeap\LeapOneSymfonySdk\Services\ApiProvider\OrderApiProvider', 'getVoucherApi' ]

  VentureLeap\OrderService\Api\OrderVoucherApi:
    factory: [ '@VentureLeap\LeapOneSymfonySdk\Services\ApiProvider\OrderApiProvider', 'getOrderVoucherApi' ]

  VentureLeap\OrderService\Api\ConfigurationEntryApi:
    factory: [ '@VentureLeap\LeapOneSymfonySdk\Services\ApiProvider\OrderApiProvider', 'getConfigurationEntryApi' ]

  # RENDERER
  VentureLeap\LeapOneSymfonySdk\Services\ApiProvider\RendererApiProvider:
    arguments:
      $endpoint: '%env(string:LEAP_ONE_ENDPOINT_URL)%'

  VentureLeap\RendererService\Api\RenderApi:
    factory: [ '@VentureLeap\LeapOneSymfonySdk\Services\ApiProvider\RendererApiProvider', 'getRenderApi' ]

  VentureLeap\RendererService\Api\TemplateApi:
    factory: [ '@VentureLeap\LeapOneSymfonySdk\Services\ApiProvider\RendererApiProvider', 'getTemplateApi' ]

  VentureLeap\RendererService\Api\ConfigurationEntryApi:
    factory: [ '@VentureLeap\LeapOneSymfonySdk\Services\ApiProvider\RendererApiProvider', 'getConfigurationEntryApi' ]

  # USER
  VentureLeap\LeapOneSymfonySdk\Services\ApiProvider\UserApiProvider:
    arguments:
      $endpoint: '%env(string:LEAP_ONE_ENDPOINT_URL)%'

  VentureLeap\UserService\Api\UserApi:
    factory: [ '@VentureLeap\LeapOneSymfonySdk\Services\ApiProvider\UserApiProvider', 'getUserApi' ]

  VentureLeap\UserService\Api\ConfigurationEntryApi:
    factory: [ '@VentureLeap\LeapOneSymfonySdk\Services\ApiProvider\UserApiProvider', 'getConfigurationEntryApi' ]

  VentureLeap\UserService\Api\SocialAuthenticationApi:
    factory: [ '@VentureLeap\LeapOneSymfonySdk\Services\ApiProvider\UserApiProvider', 'getSocialAuthenticationApi' ]

  VentureLeap\UserService\Api\AccountApi:
    factory: [ '@VentureLeap\LeapOneSymfonySdk\Services\ApiProvider\UserApiProvider', 'getAccountApi' ]

  # AUDIT LOG
  VentureLeap\LeapOneSymfonySdk\Services\ApiProvider\AuditLogApiProvider:
    arguments:
      $endpoint: '%env(string:LEAP_ONE_ENDPOINT_URL)%'

  VentureLeap\AuditLogService\Api\AuditLogEntryApi:
    factory: [ '@VentureLeap\LeapOneSymfonySdk\Services\ApiProvider\AuditLogApiProvider', 'getAuditLogEntryApi' ]

  VentureLeap\AuditLogService\Api\ConfigurationEntryApi:
    factory: [ '@VentureLeap\LeapOneSymfonySdk\Services\ApiProvider\AuditLogApiProvider', 'getConfigurationEntryApi' ]


  # Product
  VentureLeap\LeapOneSymfonySdk\Services\ApiProvider\ProductApiProvider:
    arguments:
      $endpoint: '%env(string:LEAP_ONE_ENDPOINT_URL)%'

  VentureLeap\ProductService\Api\ProductApi:
    factory: [ '@VentureLeap\LeapOneSymfonySdk\Services\ApiProvider\ProductApiProvider', 'getProductApi' ]

  VentureLeap\ProductService\Api\ProductCategoryApi:
    factory: [ '@VentureLeap\LeapOneSymfonySdk\Services\ApiProvider\ProductApiProvider', 'getProductCategoryApi' ]

  VentureLeap\ProductService\Api\PriceListProductApi:
    factory: [ '@VentureLeap\LeapOneSymfonySdk\Services\ApiProvider\ProductApiProvider', 'getPriceListProductApi' ]

  VentureLeap\ProductService\Api\PriceListApi:
    factory: [ '@VentureLeap\LeapOneSymfonySdk\Services\ApiProvider\ProductApiProvider', 'getPriceListApi' ]

  VentureLeap\LeapOneSymfonySdk\Services\ApiProvider\ConfigurationApiProvider:
    arguments:
      $endpoint: '%env(string:LEAP_ONE_ENDPOINT_URL)%'

  VentureLeap\ConfigurationService\Api\ConfigurationEntryApi:
    factory: [ '@VentureLeap\LeapOneSymfonySdk\Services\ApiProvider\ConfigurationApiProvider', 'getConfigurationEntryApi' ]

  # TOKEN
  VentureLeap\LeapOneSymfonySdk\Services\ApiProvider\TokenApiProvider:
    arguments:
      $endpoint: '%env(string:LEAP_ONE_ENDPOINT_URL)%'

  VentureLeap\ConfigurationService\Api\TokenApi:
    factory: [ '@VentureLeap\LeapOneSymfonySdk\Services\ApiProvider\TokenApiProvider', 'getTokenApi' ]

  VentureLeap\LeapOneSymfonySdk\Services\TokenProvider\TokenProvider:
    arguments:
      $applicationId: '%env(string:LEAP_ONE_APP_ID)%'
      $applicationSecret: '%env(string:LEAP_ONE_APP_SECRET)%'

  # Rating
  VentureLeap\LeapOneSymfonySdk\Services\ApiProvider\RatingApiProvider:
    arguments:
      $endpoint: '%env(string:LEAP_ONE_ENDPOINT_URL)%'

  VentureLeap\RatingService\Api\RatingApi:
    factory: [ '@VentureLeap\LeapOneSymfonySdk\Services\ApiProvider\RatingApiProvider', 'getRatingApi' ]

  leap_one.user_provider:
    class: VentureLeap\LeapOneSymfonySdk\Services\User\UserProvider
    public: true
    arguments:
      $userType: 'user'

  # FORM AUTHENTICATION
  leap_one.login_form_authenticator:
    class: VentureLeap\LeapOneSymfonySdk\Services\Security\LoginFormAuthenticator
    public: true
    arguments:
      $loginRoute: 'leap_one_user_login'
      $userProvider: '@leap_one.user_provider'
    tags: [ 'leap_one.login_form_authenticators' ]

  # FORM AUTHENTICATION
  leap_one.mfa_authenticator:
    class: VentureLeap\LeapOneSymfonySdk\Services\Security\MfaAuthenticator
    public: true
    arguments:
      $loginRoute: 'leap_one_user_login'
      $userProvider: '@leap_one.user_provider'
    tags: [ 'leap_one.login_form_authenticators' ]

